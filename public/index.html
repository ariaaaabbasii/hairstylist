<!DOCTYPE html>
<html lang="nl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diamond Haarsalon Leiden - Jouw Stralende Look</title>
    <meta name="description" content="Ontdek jouw perfecte look bij Diamond Haarsalon. Professionele kappers, premium producten en persoonlijke aandacht in Leiden. Maak vandaag nog een afspraak!">

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>

    <!-- Configure Tailwind colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: {
                            light: '#f7eed9',
                            DEFAULT: '#d4af37',
                            dark: '#b8860b'
                        },
                        brand: {
                            primary: '#b8860b',
                            secondary: '#d4af37',
                            light: '#f7eed9',
                            dark: '#3a2d0c',
                            darker: '#1c1605'
                        }
                    },
                    fontFamily: {
                        'playfair': ['Playfair Display', 'serif'],
                        'poppins': ['Poppins', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400..900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Fancybox CSS & JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

    <!-- Axios for API calls -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js"></script>

    <!-- Custom Styles -->
    <style>
        /* Base Typography & Smoothing */
        body {
            font-family: 'Poppins', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            scroll-behavior: smooth;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
        }

        /* Custom scrollbar for chat messages and price modal */
        #chat-messages::-webkit-scrollbar,
        #price-modal-body::-webkit-scrollbar {
            width: 6px;
        }
        
        #chat-messages::-webkit-scrollbar-track,
        #price-modal-body::-webkit-scrollbar-track {
            background: theme('colors.neutral.100');
            border-radius: 10px;
        }
        
        #chat-messages::-webkit-scrollbar-thumb,
        #price-modal-body::-webkit-scrollbar-thumb {
            background: theme('colors.brand.secondary');
            border-radius: 10px;
        }
        
        #chat-messages::-webkit-scrollbar-thumb:hover,
        #price-modal-body::-webkit-scrollbar-thumb:hover {
            background: theme('colors.brand.primary');
        }

        /* Header shrink effect styling */
        #main-header {
            transition: all 0.4s ease;
        }
        
        #main-header.header-scrolled {
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 4px 10px -1px rgba(0, 0, 0, 0.1);
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            backdrop-filter: blur(10px);
        }
        
        /* Style adjustments for scrolled header text/links */
        #main-header.header-scrolled nav a:not(.button-cta) {
            color: theme('colors.neutral.800');
        }
        
        #main-header.header-scrolled nav a:hover:not(.button-cta) {
            color: theme('colors.brand.primary');
        }
        
        #main-header.header-scrolled .logo-text {
            color: theme('colors.brand.secondary');
        }
        
        #main-header.header-scrolled .phone-link {
            color: theme('colors.brand.primary');
        }
        
        #main-header.header-scrolled .phone-link:hover {
            color: theme('colors.brand.dark');
        }
        
        #main-header.header-scrolled #mobile-menu-button {
            color: theme('colors.neutral.800');
        }
        
        #main-header.header-scrolled #mobile-menu-button:hover {
            color: theme('colors.brand.primary');
            background-color: theme('colors.gold.light');
        }

        /* Improved Mobile Menu Animation */
        .mobile-menu-container {
            transform-origin: top center;
            transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            transform: scaleY(0);
            opacity: 0;
            visibility: hidden;
            height: 0;
            overflow: hidden;
        }
        
        .mobile-menu-container.menu-open {
            transform: scaleY(1);
            opacity: 1;
            visibility: visible;
            height: auto;
        }
        
        /* Animation Keyframes */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes slideInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
        .animate-bounce { animation: bounce 1s infinite ease-in-out; }

        /* Animation classes */
        .animate-on-scroll { opacity: 0; }
        .is-visible { opacity: 1; }
        
        /* Apply animation name via CSS variable */
        .animate-on-scroll { --animation-name: fadeIn; } /* Default */
        .animate-fade-in { --animation-name: fadeIn; }
        .animate-slide-up { --animation-name: slideUp; }
        .animate-slide-in-left { --animation-name: slideInLeft; }
        .animate-slide-in-right { --animation-name: slideInRight; }
        .animate-scale-in { --animation-name: scaleIn; }

        /* Chat Window Animation */
        #chat-window {
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            transform-origin: bottom right;
        }

        /* Chat Quick Reply */
        .chat-quick-reply {
            @apply px-3 py-1.5 bg-gold-light/50 text-brand-primary border border-gold-light rounded-full text-xs font-medium transition duration-200 cursor-pointer hover:bg-gold-light/80 hover:text-brand-dark focus:outline-none focus:ring-2 focus:ring-brand-secondary focus:ring-offset-1 active:scale-95;
        }

        /* Subtle noise background */
        .noise-bg {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 800 800' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }

        /* Image hover effect */
        .hover-filter {
            transition: filter 0.4s ease, transform 0.4s ease;
        }
        
        .hover-filter:hover {
            filter: brightness(0.9) saturate(1.1);
            transform: scale(1.03);
        }

        /* Gallery Item Hover Effects */
        .gallery-item {
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .gallery-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        
        /* Make image zoom slightly on gallery item hover */
        .gallery-item img {
            transition: transform 0.5s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        /* Overlay for gallery item */
        .gallery-overlay {
            @apply absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 z-10 cursor-pointer;
        }

        /* Price Modal Transition Styles */
        #price-modal {
            transition: opacity 0.3s ease-in-out;
        }
        
        #price-modal > div {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        
        /* Service cards improved hover effect */
        .service-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .service-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Improve accessibility - focus styles */
        a:focus-visible, button:focus-visible {
            outline: 2px solid theme('colors.brand.primary');
            outline-offset: 2px;
        }
        
        /* Floating action buttons */
        .floating-btn {
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .floating-btn:hover {
            transform: translateY(-5px) scale(1.05);
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.1));
        }
        
        /* Testimonial card hover effect */
        .testimonial-card {
            transition: all 0.3s ease;
        }
        
        .testimonial-card:hover {
            transform: translateY(-5px);
        }
        
        /* Improved button hover effects */
        .btn-primary {
            @apply px-6 py-3 bg-brand-primary text-white rounded-full font-medium shadow-md transition-all duration-300;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .btn-primary:hover {
            @apply bg-brand-dark;
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .btn-primary:active {
            transform: translateY(-1px);
        }
        
        /* Aspect ratio utility for modern browsers */
        .aspect-ratio-box {
            position: relative;
        }
        
        .aspect-ratio-box::before {
            content: "";
            display: block;
            padding-bottom: var(--aspect-ratio);
        }
        
        .aspect-ratio-box > * {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .aspect-ratio-1x1 {
            --aspect-ratio: 100%;
        }
        
        .aspect-ratio-4x3 {
            --aspect-ratio: 75%;
        }
        
        .aspect-ratio-16x9 {
            --aspect-ratio: 56.25%;
        }
    </style>
</head>

<body class="bg-neutral-50 text-neutral-700 antialiased font-poppins">
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-white z-50 px-4 py-2 text-brand-primary font-medium rounded-md shadow">Skip to main content</a>

    <!-- Header -->
    <header id="main-header" class="fixed w-full top-0 z-50 py-3 md:py-4 bg-transparent transition-all duration-300">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="#home" class="text-2xl md:text-3xl font-bold font-playfair text-brand-secondary hover:text-brand-light transition duration-300 logo-text" aria-label="Diamond Haarsalon Home">
    Diamond
</a>



            <!-- Desktop Navigation -->
            <nav class="hidden lg:block" aria-label="Main Navigation">
                <ul class="flex space-x-8">
                    <li><a href="#home" class="text-white hover:text-brand-light font-medium transition duration-300 pb-1 border-b-2 border-transparent hover:border-brand-light">Home</a></li>
                    <li><a href="#referral-program" class="text-white hover:text-brand-light font-medium transition duration-300 pb-1 border-b-2 border-transparent hover:border-brand-light">Vrienden Bonus</a></li>
                    <li><a href="#over-ons" class="text-white hover:text-brand-light font-medium transition duration-300 pb-1 border-b-2 border-transparent hover:border-brand-light">Over Ons</a></li>
                    <li><a href="#galerij" class="text-white hover:text-brand-light font-medium transition duration-300 pb-1 border-b-2 border-transparent hover:border-brand-light">Galerij</a></li>
                    <li><a href="#contact" class="text-white hover:text-brand-light font-medium transition duration-300 pb-1 border-b-2 border-transparent hover:border-brand-light">Contact</a></li>
                </ul>
            </nav>

            <!-- Call & Mobile Menu Button -->
            <div class="flex items-center space-x-3">
                <a href="tel:+31627403860" class="phone-link hidden sm:inline-flex items-center text-white hover:text-brand-light font-medium transition duration-300">
                    <i class="fas fa-phone-alt mr-2 text-sm" aria-hidden="true"></i> 06-27403860
                </a>
                <button id="mobile-menu-button" class="lg:hidden p-2 rounded-md text-brand-secondary hover:text-brand-light hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-label="Open hoofdmenu" aria-controls="mobile-menu" aria-expanded="false">
    <i class="fas fa-bars text-xl" aria-hidden="true"></i>
</button>
                <a href="#contact" class="button-cta hidden lg:inline-flex items-center justify-center px-6 py-3 rounded-full font-medium transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 bg-brand-primary text-white hover:bg-brand-dark focus:ring-brand-primary shadow-md hover:shadow-lg">Afspraak Maken</a>
            </div>
        </div>

        <!-- Improved Mobile Menu with better animation and accessibility -->
        <div id="mobile-menu" class="mobile-menu-container lg:hidden absolute top-full left-0 w-full bg-white shadow-xl border-t border-neutral-100 z-50" role="navigation" aria-label="Mobiel menu">
            <div class="container mx-auto px-4 py-5">
                <ul class="space-y-1">
                    <li><a href="#home" class="mobile-menu-link block py-3 px-4 text-lg font-medium text-neutral-700 hover:bg-gold-light hover:text-brand-dark rounded-lg transition duration-300">Home</a></li>
                    <li><a href="#referral-program" class="mobile-menu-link block py-3 px-4 text-lg font-medium text-neutral-700 hover:bg-gold-light hover:text-brand-dark rounded-lg transition duration-300">Vrienden Bonus</a></li>
                    <li><a href="#over-ons" class="mobile-menu-link block py-3 px-4 text-lg font-medium text-neutral-700 hover:bg-gold-light hover:text-brand-dark rounded-lg transition duration-300">Over Ons</a></li>
                    <li><a href="#galerij" class="mobile-menu-link block py-3 px-4 text-lg font-medium text-neutral-700 hover:bg-gold-light hover:text-brand-dark rounded-lg transition duration-300">Galerij</a></li>
                    <li><a href="#contact" class="mobile-menu-link block py-3 px-4 text-lg font-medium text-neutral-700 hover:bg-gold-light hover:text-brand-dark rounded-lg transition duration-300">Contact</a></li>
                </ul>
                
                <div class="mt-6 space-y-4">
                    <a href="tel:+31627403860" class="flex items-center py-3 px-4 text-lg text-brand-primary font-semibold hover:text-brand-dark transition duration-300 bg-gold-light/50 rounded-lg">
                        <i class="fas fa-phone-alt mr-3" aria-hidden="true"></i> Bel 06-27403860
                    </a>
                    <a href="#contact" class="mobile-menu-link button-cta inline-flex items-center justify-center px-6 py-4 rounded-lg font-medium transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 bg-brand-primary text-white hover:bg-brand-dark focus:ring-brand-primary shadow-md hover:shadow-lg w-full">
                        <i class="far fa-calendar-alt mr-2" aria-hidden="true"></i> Afspraak Maken
                    </a>
                </div>
                
                <!-- Social links in mobile menu -->
                <div class="mt-6 pt-4 border-t border-neutral-100">
                    <p class="text-sm text-neutral-500 mb-3">Volg ons</p>
                    <div class="flex space-x-4">
                        <a href="#" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-neutral-100 hover:bg-gold-light text-neutral-600 hover:text-brand-primary flex items-center justify-center transition duration-300" aria-label="Facebook">
                            <i class="fab fa-facebook-f" aria-hidden="true"></i>
                        </a>
                        <a href="#" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-neutral-100 hover:bg-gold-light text-neutral-600 hover:text-brand-primary flex items-center justify-center transition duration-300" aria-label="Instagram">
                            <i class="fab fa-instagram" aria-hidden="true"></i>
                        </a>
                        <a href="#" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-neutral-100 hover:bg-gold-light text-neutral-600 hover:text-brand-primary flex items-center justify-center transition duration-300" aria-label="Pinterest">
                            <i class="fab fa-pinterest" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section id="home" class="relative min-h-screen pt-16 pb-16 md:pb-24 lg:pb-32 flex items-center bg-cover bg-center bg-neutral-800" style="background-image: url('/Images/SalonMain.jpg');">
            <!-- Overlay -->
            <div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/60 to-black/70 z-0"></div>

            <!-- Modified: Hero Referral Banner - Made less tall -->
            <div class="absolute top-20 sm:top-24 md:top-28 left-0 right-0 z-10">
                <div class="container mx-auto px-4">
                    <div class="bg-brand-primary text-white py-1.5 px-3 rounded-lg sm:rounded-xl max-w-3xl mx-auto shadow-lg">
                        <div class="flex flex-col sm:flex-row items-center justify-center sm:space-y-0 sm:space-x-2 text-center sm:text-left">
                            <div class="flex items-center">
                                <i class="fas fa-gift text-sm mr-1.5 animate-pulse" aria-hidden="true"></i>
                                <span class="font-medium text-xs sm:text-sm">Vrienden Bonus:</span>
                            </div>
                            <p class="text-xs">Breng een vriend(in) mee & ontvang beiden 10% korting!</p>
                            <a href="#referral-program" class="ml-1 sm:ml-2 underline hover:text-brand-light font-medium whitespace-nowrap text-xs">Meer info</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hero Content Container -->
            <div class="container mx-auto px-4 z-10 text-white relative mt-16 sm:mt-12">
                <div class="max-w-3xl animate-on-scroll animate-fade-in">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 leading-tight">Ontdek Jouw <span class="text-brand-secondary">Stralende</span> Stijl bij Diamond</h1>
                    <p class="text-lg md:text-xl lg:text-2xl mb-8 font-light">Waar vakmanschap en persoonlijke aandacht samenkomen voor een haarervaring die je verdient.</p>
                    
                    <div class="flex flex-col sm:flex-row gap-4">
                        <a href="#contact" class="btn-primary flex items-center justify-center">
                            <i class="far fa-calendar-alt mr-2" aria-hidden="true"></i> Plan Jouw Afspraak
                        </a>
                        <!-- Price List Button -->
                        <button id="open-price-modal-button" class="px-6 py-3 border-2 border-white hover:bg-white hover:text-neutral-900 rounded-full transition-all duration-300 text-center font-medium transform hover:-translate-y-1 flex items-center justify-center">
                            <i class="fas fa-tags mr-2" aria-hidden="true"></i> Prijslijst
                        </button>
                    </div>
                    
                    <!-- Rating Badge -->
                    <div class="mt-10 bg-white/10 backdrop-blur-sm py-3 px-5 rounded-lg inline-flex items-center">
                        <div class="text-yellow-400 flex mr-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="text-white">
                            <span class="font-medium">4.9 uit 5</span>
                            <span class="text-sm ml-1">based on 120+ reviews</span>
                        </div>
                    </div>
                </div>

                <!-- Scroll Down Indicator -->
                <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 text-center hidden sm:block">
                    <a href="#over-ons" class="inline-block text-white animate-bounce" aria-label="Scroll naar over ons sectie">
                        <span class="block mb-1 text-xs font-light">Ontdek meer</span>
                        <i class="fas fa-chevron-down text-sm" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
        </section>

        <!-- Why Choose Us Section -->
        <section class="py-16 md:py-24 bg-white noise-bg relative">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-4 animate-on-scroll animate-fade-in">Waarom Diamond?</h2>
                <p class="text-center text-neutral-600 max-w-3xl mx-auto mb-12 md:mb-16 text-base md:text-lg animate-on-scroll animate-fade-in">Meer dan een knipbeurt - wij creëren een unieke ervaring die je haar én humeur laat stralen.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
                    <!-- USP 1 -->
                    <div class="text-center p-6 rounded-xl hover:bg-brand-light/30 transition-all duration-500 animate-on-scroll animate-slide-up">
                        <div class="bg-brand-light inline-flex p-4 rounded-full mb-5 transform transition-transform duration-500 hover:rotate-12 hover:shadow-md">
                            <i class="fas fa-cut text-2xl md:text-3xl text-brand-primary" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl md:text-2xl font-semibold mb-3">Gepassioneerde Stylisten</h3>
                        <p class="text-neutral-600 text-sm md:text-base">Kunstwerken gecreëerd door ons team van doorlopend bijgeschoolde haarexperts.</p>
                    </div>

                    <!-- USP 2 -->
                    <div class="text-center p-6 rounded-xl hover:bg-brand-light/30 transition-all duration-500 animate-on-scroll animate-slide-up" data-delay="0.15s">
                        <div class="bg-brand-light inline-flex p-4 rounded-full mb-5 transform transition-transform duration-500 hover:rotate-12 hover:shadow-md">
                            <i class="fas fa-leaf text-2xl md:text-3xl text-brand-primary" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl md:text-2xl font-semibold mb-3">Luxe Producten</h3>
                        <p class="text-neutral-600 text-sm md:text-base">Hoogwaardige, duurzame producten die je haar laten stralen zonder het milieu te belasten.</p>
                    </div>

                    <!-- USP 3 -->
                    <div class="text-center p-6 rounded-xl hover:bg-brand-light/30 transition-all duration-500 animate-on-scroll animate-slide-up" data-delay="0.3s">
                        <div class="bg-brand-light inline-flex p-4 rounded-full mb-5 transform transition-transform duration-500 hover:rotate-12 hover:shadow-md">
                            <i class="fas fa-heart text-2xl md:text-3xl text-brand-primary" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-xl md:text-2xl font-semibold mb-3">Persoonlijke Ervaring</h3>
                        <p class="text-neutral-600 text-sm md:text-base">Jouw wensen staan centraal. We luisteren aandachtig en creëren een look die perfect bij je past.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Referral Program Section -->
        <section id="referral-program" class="py-16 md:py-24 bg-white noise-bg">
            <div class="container mx-auto px-4">
                <div class="max-w-5xl mx-auto">
                    <div class="bg-gold-light/30 rounded-2xl p-6 md:p-10 lg:p-12 relative overflow-hidden shadow-lg border border-gold-light/30">
                        <div class="relative z-10">
                            <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                                <div class="md:w-3/5 animate-on-scroll animate-slide-in-left">
                                    <h2 class="text-3xl md:text-4xl font-bold mb-4 text-brand-dark">
                                        <span class="block">Vrienden Bonus</span>
                                        <span class="block mt-1 text-brand-primary text-2xl md:text-3xl">Deel Diamond & Bespaar!</span>
                                    </h2>
                                    <p class="text-neutral-700 mb-6 text-base md:text-lg">Introduceer een vriend(in) bij Diamond, en jullie ontvangen <strong>beiden 10% korting</strong> op de volgende behandeling.</p>

                                    <h3 class="font-semibold text-lg md:text-xl mb-3 text-brand-dark">Hoe werkt het?</h3>
                                    <ol class="space-y-3 text-neutral-700 mb-6 text-sm md:text-base">
                                        <li class="flex items-start">
                                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-primary text-white flex items-center justify-center mr-3 mt-0.5 text-xs">1</span>
                                            <span>Vertel je vrienden over Diamond</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-primary text-white flex items-center justify-center mr-3 mt-0.5 text-xs">2</span>
                                            <span>Vraag hen jouw naam te noemen bij het boeken</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-primary text-white flex items-center justify-center mr-3 mt-0.5 text-xs">3</span>
                                            <span>Zij ontvangen 10% korting op hun eerste bezoek</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-primary text-white flex items-center justify-center mr-3 mt-0.5 text-xs">4</span>
                                            <span>Jij krijgt 10% korting op je volgende behandeling</span>
                                        </li>
                                    </ol>

                                    <a href="#contact" class="btn-primary inline-flex items-center">
                                        <i class="fas fa-users mr-2" aria-hidden="true"></i>
                                        Start met Verwijzen
                                    </a>
                                </div>

                                <div class="md:w-2/5 text-center animate-on-scroll animate-slide-in-right">
                                    <div class="relative inline-block">
                                        <!-- Ping animation -->
                                        <div class="absolute inset-0 rounded-full bg-brand-primary/20 animate-ping opacity-50"></div>
                                        <img src="/Images/Friends.PNG" alt="Twee lachende vrienden met mooi haar die korting vieren" class="relative z-10 rounded-xl shadow-lg transform hover:rotate-2 transition-transform duration-500 w-full max-w-[250px] sm:max-w-xs mx-auto" loading="lazy">
                                        <div class="absolute -bottom-3 -right-3 md:-bottom-4 md:-right-4 bg-white rounded-lg shadow-md px-3 py-1.5 md:px-4 md:py-2 transform rotate-3 z-20">
                                            <span class="text-brand-primary font-bold text-lg md:text-xl">10%</span>
                                            <span class="block text-xs text-neutral-600">KORTING</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Decorative element -->
                        <div class="absolute bottom-0 right-0 text-brand-primary/10 text-7xl md:text-9xl transform translate-x-1/4 translate-y-1/4 opacity-50 hidden lg:block">
                            <i class="fas fa-gift" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="over-ons" class="py-16 md:py-24 bg-neutral-50 overflow-hidden">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
                    <div class="relative animate-on-scroll animate-slide-in-left">
                        <div class="relative rounded-xl overflow-hidden shadow-xl">
                            <img src="/Images/Kapperstoelen.jpg" alt="Stijlvol en modern interieur van Diamond Haarsalon" class="w-full h-auto aspect-ratio-box aspect-ratio-4x3 object-cover hover-filter" loading="lazy">
                        </div>

                        <!-- Decorative elements -->
                        <div class="absolute -bottom-4 -left-4 w-24 h-24 bg-brand-light rounded-xl -z-10 transform -rotate-6 hidden sm:block"></div>
                        <div class="absolute -top-4 -right-4 w-24 h-24 bg-brand-primary/20 rounded-xl -z-10 transform rotate-6 hidden sm:block"></div>

                        <!-- Stats card -->
                        <div class="absolute -right-3 bottom-1/4 sm:bottom-1/3 bg-white rounded-lg shadow-lg p-3 text-center w-28 transform transition-transform hover:scale-105">
                            <div class="text-2xl font-bold text-brand-primary">8+</div>
                            <div class="text-xs text-neutral-600">Jaar ervaring</div>
                        </div>
                    </div>

                    <div class="animate-on-scroll animate-slide-in-right">
                        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-6">Ons Verhaal</h2>
                        <p class="text-neutral-600 mb-6 text-base md:text-lg">
                            Diamond is geboren uit een passie voor haar én mensen. Sinds 2015 creëren we in Leiden een plek waar vakmanschap en persoonlijke aandacht centraal staan.
                        </p>
                        <p class="text-neutral-600 mb-8 text-sm md:text-base leading-relaxed">
                            Wij geloven dat een kapsel meer is dan mooi haar - het is een uitdrukking van wie je bent. We luisteren, geven eerlijk advies en zorgen voor een resultaat dat past bij jouw persoonlijkheid en levensstijl.
                        </p>

                        <h3 class="text-xl font-semibold mb-4">Waar We Voor Staan:</h3>
                        <ul class="space-y-4 mb-8">
                            <li class="flex items-start">
                                <div class="bg-brand-light p-2 rounded-full mr-3 mt-1 text-brand-primary flex-shrink-0">
                                    <i class="fas fa-medal w-4 h-4 text-center" aria-hidden="true"></i>
                                </div>
                                <div>
                                    <span class="font-semibold text-neutral-800 text-base">Vakmanschap</span>
                                    <p class="text-neutral-600 text-xs sm:text-sm">Continue bijscholing in de nieuwste technieken en trends.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div class="bg-brand-light p-2 rounded-full mr-3 mt-1 text-brand-primary flex-shrink-0">
                                    <i class="fas fa-heart w-4 h-4 text-center" aria-hidden="true"></i>
                                </div>
                                <div>
                                    <span class="font-semibold text-neutral-800 text-base">Persoonlijke benadering</span>
                                    <p class="text-neutral-600 text-xs sm:text-sm">Jouw wensen staan centraal in elke behandeling.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div class="bg-brand-light p-2 rounded-full mr-3 mt-1 text-brand-primary flex-shrink-0">
                                    <i class="fas fa-couch w-4 h-4 text-center" aria-hidden="true"></i>
                                </div>
                                <div>
                                    <span class="font-semibold text-neutral-800 text-base">Ontspannen Ervaring</span>
                                    <p class="text-neutral-600 text-xs sm:text-sm">Een moment van rust en verwennerij voor jezelf.</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div class="bg-brand-light p-2 rounded-full mr-3 mt-1 text-brand-primary flex-shrink-0">
                                    <i class="fas fa-leaf w-4 h-4 text-center" aria-hidden="true"></i>
                                </div>
                                <div>
                                    <span class="font-semibold text-neutral-800 text-base">Kwaliteitsproducten</span>
                                    <p class="text-neutral-600 text-xs sm:text-sm">We werken met zorgvuldig geselecteerde, hoogwaardige merken.</p>
                                </div>
                            </li>
                        </ul>

                        <a href="#contact" class="btn-primary inline-flex items-center">
                            <i class="fas fa-users mr-2" aria-hidden="true"></i>
                            Maak Kennis Met Ons Team
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="galerij" class="py-16 md:py-24 bg-neutral-100 relative">
            <div class="absolute top-0 left-0 w-full h-20 bg-gradient-to-b from-neutral-50 to-transparent"></div>
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-4 animate-on-scroll animate-fade-in">Inspiratie Galerij</h2>
                <p class="text-center text-neutral-600 max-w-3xl mx-auto mb-12 md:mb-16 text-base md:text-lg animate-on-scroll animate-fade-in">Bekijk onze creaties en laat je inspireren.</p>

                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-5">
                    <!-- Gallery Item 1 -->
                    <a href="/Images/Haar.jpg" data-fancybox="gallery" data-caption="Zachte Balayage Highlights" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md">
                        <img src="/Images/Haar.jpg" alt="Voorbeeld kapsel: Zachte balayage highlights" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Zachte Balayage</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 2 -->
                    <a href="/Images/Salon.jpg" data-fancybox="gallery" data-caption="Moderne Strakke Herencoupe" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.05s">
                        <img src="/Images/Salon.jpg" alt="Voorbeeld kapsel: Moderne strakke herencoupe" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Moderne Herencoupe</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 3 -->
                    <a href="/Images/Salon1.jpg" data-fancybox="gallery" data-caption="Levendige Rode Kleuring" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.1s">
                        <img src="/Images/Salon1.jpg" alt="Voorbeeld kapsel: Levendige rode haarkleuring" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Levendige Kleuring</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 4 -->
                    <a href="/Images/Kapperstoelen.jpg" data-fancybox="gallery" data-caption="Elegante Opgestoken Updo" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.15s">
                        <img src="/Images/Kapperstoelen.jpg" alt="Voorbeeld kapsel: Elegant opgestoken feestkapsel" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Elegante Updo</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 5 -->
                    <a href="/Images/SalonMain.jpg" data-fancybox="gallery" data-caption="Natuurlijke Krullen Definitie" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.2s">
                        <img src="/Images/SalonMain.jpg" alt="Voorbeeld kapsel: Goed gedefinieerde natuurlijke krullen" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Natuurlijke Krullen</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 6 -->
                    <a href="/Images/Haar.jpg" data-fancybox="gallery" data-caption="Gedurfde Korte Boblijn" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.25s">
                        <img src="/Images/Haar.jpg" alt="Voorbeeld kapsel: Gedurfde korte boblijn" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Gedurfde Boblijn</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 7 -->
                    <a href="/Images/Salon.jpg" data-fancybox="gallery" data-caption="Koel Platinum Blond" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.3s">
                        <img src="/Images/Salon.jpg" alt="Voorbeeld kapsel: Koel platinum blond haar" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Platinum Blond</p>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Gallery Item 8 -->
                    <a href="/Images/Salon1.jpg" data-fancybox="gallery" data-caption="Herenkapsel met Strakke Scheiding" class="gallery-item animate-on-scroll animate-scale-in block aspect-ratio-box aspect-ratio-1x1 rounded-xl overflow-hidden shadow-md" data-delay="0.35s">
                        <img src="/Images/Salon1.jpg" alt="Voorbeeld kapsel: Herenkapsel met strakke zijscheiding" loading="lazy" class="w-full h-full object-cover">
                        <div class="gallery-overlay">
                            <div class="text-white text-center p-2">
                                <i class="fas fa-search-plus text-2xl mb-1" aria-hidden="true"></i>
                                <p class="text-xs font-medium">Strakke Scheiding</p>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="text-center mt-12 md:mt-16 animate-on-scroll animate-fade-in">
                    <a href="https://instagram.com/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-white border border-neutral-300 hover:border-brand-primary text-neutral-700 hover:text-brand-primary rounded-full transition-all duration-300 font-medium shadow-sm hover:shadow-md transform hover:-translate-y-1 text-sm md:text-base">
                        <i class="fab fa-instagram mr-2 text-lg" aria-hidden="true"></i> Volg ons op Instagram
                    </a>
                </div>
            </div>
        </section>

        <!-- Testimonials Section - UPDATED with new reviews -->
        <section class="py-16 md:py-24 bg-white noise-bg">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-4 animate-on-scroll animate-fade-in">Wat Klanten Zeggen</h2>
                <p class="text-center text-neutral-600 max-w-3xl mx-auto mb-12 md:mb-16 text-base md:text-lg animate-on-scroll animate-fade-in">Echte ervaringen die voor zich spreken.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Testimonial 1 - UPDATED -->
                    <div class="bg-neutral-50 p-6 md:p-8 rounded-xl testimonial-card animate-on-scroll animate-slide-up relative hover:shadow-xl transition-shadow duration-300 border border-transparent hover:border-neutral-100">
                        <div class="absolute -top-3 -left-3 text-brand-primary/10 text-5xl md:text-6xl z-0">
                            <i class="fas fa-quote-left" aria-hidden="true"></i>
                        </div>
                        <div class="relative z-10">
                            <div class="flex mb-4 text-yellow-400">
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                            </div>
                            <p class="italic text-neutral-600 mb-6 text-sm md:text-base leading-relaxed">
                                "Ik heb nog nooit zo'n goeie keratine behandeling genomen waarbij mijn haren echt gezond zijn geworden en de service echt perfect! vriendelijke vrouwen!"
                            </p>
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-brand-light flex items-center justify-center flex-shrink-0">
                                    <span class="text-brand-primary font-playfair font-semibold text-lg">L</span>
                                </div>
                                <div class="ml-3">
                                    <p class="font-medium text-base md:text-lg">Lana S.</p>
                                    <p class="text-xs text-neutral-500">Keratine Behandeling</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 2 - UPDATED -->
                    <div class="bg-neutral-50 p-6 md:p-8 rounded-xl testimonial-card animate-on-scroll animate-slide-up relative hover:shadow-xl transition-shadow duration-300 border border-transparent hover:border-neutral-100" data-delay="0.15s">
                        <div class="absolute -top-3 -left-3 text-brand-primary/10 text-5xl md:text-6xl z-0">
                            <i class="fas fa-quote-left" aria-hidden="true"></i>
                        </div>
                        <div class="relative z-10">
                            <div class="flex mb-4 text-yellow-400">
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                            </div>
                            <p class="italic text-neutral-600 mb-6 text-sm md:text-base leading-relaxed">
                                "Deze dame wist met twee woorden precies wat ik wilde. Ik wilde een afspraak maken maar werd gelijk geholpen. Ik kom zeker terug. En zal mijn wenkbrouwen laten epileren. Echt TOP."
                            </p>
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-brand-light flex items-center justify-center flex-shrink-0">
                                    <span class="text-brand-primary font-playfair font-semibold text-lg">L</span>
                                </div>
                                <div class="ml-3">
                                    <p class="font-medium text-base md:text-lg">Loes</p>
                                    <p class="text-xs text-neutral-500">Haarkleur & Styling</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 3 - UPDATED -->
                    <div class="bg-neutral-50 p-6 md:p-8 rounded-xl testimonial-card animate-on-scroll animate-slide-up relative hover:shadow-xl transition-shadow duration-300 border border-transparent hover:border-neutral-100" data-delay="0.3s">
                        <div class="absolute -top-3 -left-3 text-brand-primary/10 text-5xl md:text-6xl z-0">
                            <i class="fas fa-quote-left" aria-hidden="true"></i>
                        </div>
                        <div class="relative z-10">
                            <div class="flex mb-4 text-yellow-400">
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <i class="fas fa-star" aria-hidden="true"></i>
                            </div>
                            <p class="italic text-neutral-600 mb-6 text-sm md:text-base leading-relaxed">
                                "De beste kapper waar ik in Nederland ben geweest, het kapsel is geweldig, je moet het proberen!"
                            </p>
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-brand-light flex items-center justify-center flex-shrink-0">
                                    <span class="text-brand-primary font-playfair font-semibold text-lg">A</span>
                                </div>
                                <div class="ml-3">
                                    <p class="font-medium text-base md:text-lg">Ayse</p>
                                    <p class="text-xs text-neutral-500">Knippen & Styling</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Google Reviews Button -->
                <div class="text-center mt-12 md:mt-16 animate-on-scroll animate-fade-in">
                    <a href="https://www.google.com/maps/search/?api=1&query=Diamond+Haarsalon+Leiden" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-white border border-neutral-300 hover:border-brand-primary text-neutral-700 hover:text-brand-primary rounded-full transition-all duration-300 font-medium shadow-sm hover:shadow-md transform hover:-translate-y-1 text-sm md:text-base">
                        <i class="fab fa-google mr-2 text-lg" aria-hidden="true"></i> Bekijk ons op Google
                    </a>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-16 md:py-24 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-4 animate-on-scroll animate-fade-in">Plan Je Bezoek</h2>
                <p class="text-center text-neutral-600 max-w-3xl mx-auto mb-12 md:mb-16 text-base md:text-lg animate-on-scroll animate-fade-in">Neem contact op of kom langs in onze salon in Leiden.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-12">
                    <!-- Contact Info Card 1: Address -->
                    <div class="animate-on-scroll animate-scale-in bg-neutral-50 p-6 md:p-8 rounded-xl shadow-lg border border-neutral-100">
                        <div class="flex items-start mb-4">
                            <div class="bg-brand-light p-3 rounded-full mr-4 text-brand-primary">
                                <i class="fas fa-map-marker-alt text-xl" aria-hidden="true"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Bezoek Ons</h3>
                                <p class="text-neutral-600 text-sm md:text-base">
                                    Bevrijdingsplein 19<br>
                                    2321 BW Leiden<br>
                                    Nederland
                                </p>
                                <a href="https://maps.google.com/?q=Bevrijdingsplein+19,+2321+BW+Leiden" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-brand-primary hover:text-brand-dark mt-3 text-sm font-medium">
                                    <i class="fas fa-directions mr-2" aria-hidden="true"></i> Routebeschrijving
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Info Card 2: Hours -->
                    <div class="animate-on-scroll animate-scale-in bg-neutral-50 p-6 md:p-8 rounded-xl shadow-lg border border-neutral-100" data-delay="0.15s">
                        <div class="flex items-start mb-4">
                            <div class="bg-brand-light p-3 rounded-full mr-4 text-brand-primary">
                                <i class="fas fa-clock text-xl" aria-hidden="true"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Openingstijden</h3>
                                <ul class="text-neutral-600 space-y-1 text-sm md:text-base">
                                    <li class="flex justify-between"><span>Maandag:</span> <span>Gesloten</span></li>
                                    <li class="flex justify-between"><span>Dinsdag:</span> <span>9:00 - 18:00</span></li>
                                    <li class="flex justify-between"><span>Woensdag:</span> <span>9:00 - 18:00</span></li>
                                    <li class="flex justify-between"><span>Donderdag:</span> <span>9:00 - 18:00</span></li>
                                    <li class="flex justify-between"><span>Vrijdag:</span> <span>9:00 - 18:00</span></li>
                                    <li class="flex justify-between"><span>Zaterdag:</span> <span>9:00 - 17:00</span></li>
                                    <li class="flex justify-between"><span>Zondag:</span> <span>Gesloten</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Info Card 3: Contact -->
                    <div class="animate-on-scroll animate-scale-in bg-neutral-50 p-6 md:p-8 rounded-xl shadow-lg border border-neutral-100" data-delay="0.3s">
                        <div class="flex items-start mb-4">
                            <div class="bg-brand-light p-3 rounded-full mr-4 text-brand-primary">
                                <i class="fas fa-phone-alt text-xl" aria-hidden="true"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold mb-2">Neem Contact Op</h3>
                                <p class="text-neutral-600 mb-3 text-sm md:text-base">
                                    Vragen of wil je een afspraak maken? Bel of mail ons:
                                </p>
                                <div class="space-y-2">
                                    <a href="tel:+31627403860" class="flex items-center text-brand-primary hover:text-brand-dark">
                                        <i class="fas fa-phone-alt mr-2 text-sm" aria-hidden="true"></i>
                                        <span class="text-base font-medium">06-27403860</span>
                                    </a>
                                    <a href="mailto:info@diamond.nl" class="flex items-center text-brand-primary hover:text-brand-dark">
                                        <i class="fas fa-envelope mr-2 text-sm" aria-hidden="true"></i>
                                        <span class="text-base font-medium">info@diamond.nl</span>
                                    </a>
                                </div>
                                <div class="mt-4 pt-4 border-t border-neutral-200">
                                    <p class="text-sm text-neutral-500 mb-2">Volg ons op social media:</p>
                                    <div class="flex space-x-3">
                                        <a href="#" class="text-neutral-400 hover:text-brand-primary text-xl transition-colors">
                                            <i class="fab fa-facebook-f" aria-hidden="true"></i>
                                        </a>
                                        <a href="#" class="text-neutral-400 hover:text-brand-primary text-xl transition-colors">
                                            <i class="fab fa-instagram" aria-hidden="true"></i>
                                        </a>
                                        <a href="#" class="text-neutral-400 hover:text-brand-primary text-xl transition-colors">
                                            <i class="fab fa-pinterest-p" aria-hidden="true"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map -->
                <div class="mt-16 rounded-xl overflow-hidden shadow-lg animate-on-scroll animate-fade-in" style="height: 300px;">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2448.7823472936173!2d4.4892576!3d52.150899!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47c5c6b89a13b9cd%3A0xb6c38cf5a37a1e11!2sBevrijdingsplein%2019%2C%202321%20BW%20Leiden!5e0!3m2!1snl!2snl!4v1712373424123!5m2!1snl!2snl"
                        width="100%"
                        height="100%"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"
                        title="Locatie Diamond Haarsalon - Bevrijdingsplein 19, 2321 BW Leiden">
                    </iframe>
                    <!-- Fallback message if iframe fails -->
                    <div class="w-full h-full flex items-center justify-center bg-neutral-200 text-neutral-500 text-center p-4 absolute inset-0 -z-10">
                        <p><i class="fas fa-map-marker-alt mr-2" aria-hidden="true"></i>Kaart kon niet worden geladen. Locatie: Bevrijdingsplein 19, 2321 BW Leiden.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-brand-dark text-white pt-16 pb-8 relative overflow-hidden">
        <div class="absolute inset-0 opacity-[0.02]">
            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="footerPattern" patternUnits="userSpaceOnUse" width="30" height="30"><path d="M0 15 L30 15 M15 0 L15 30" stroke="white" stroke-width="0.5"/></pattern></defs><rect width="100%" height="100%" fill="url(#footerPattern)"/></svg>
        </div>

        <div class="container mx-auto px-4 relative z-10">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 mb-10">
                <!-- Column 1: Logo & About -->
                <div class="lg:col-span-1 sm:col-span-2">
                    <a href="#home" class="inline-flex items-center mb-4 text-2xl font-bold font-playfair">
                        Diamond
                    </a>
                    <p class="text-neutral-300 text-sm mb-6 leading-relaxed">
                        Jouw premium salon voor professionele haarbehandelingen en persoonlijk advies in Leiden.
                    </p>
                    <div class="flex space-x-3">
                        <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Facebook" class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 hover:bg-brand-primary transition-all duration-300">
                            <i class="fab fa-facebook-f text-sm" aria-hidden="true"></i>
                        </a>
<a href="#" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 hover:bg-brand-primary transition-all duration-300">
                            <i class="fab fa-instagram text-sm" aria-hidden="true"></i>
                        </a>
                        <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Pinterest" class="w-10 h-10 rounded-full flex items-center justify-center bg-white/10 hover:bg-brand-primary transition-all duration-300">
                            <i class="fab fa-pinterest-p text-sm" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>

                <!-- Column 2: Quick Links -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Snelle Links</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#home" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Home</a></li>
                        <li><a href="#referral-program" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Vrienden Bonus</a></li>
                        <li><a href="#over-ons" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Over Ons</a></li>
                        <li><a href="#galerij" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Galerij</a></li>
                        <li><a href="#contact" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Contact</a></li>
                        <li><a href="#" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Privacybeleid</a></li>
                    </ul>
                </div>

                <!-- Column 3: Services -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Populaire Diensten</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#home" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Knippen & Styling</a></li>
                        <li><a href="#home" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Balayage & Kleuring</a></li>
                        <li><a href="#home" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Verzorgende Treatments</a></li>
                        <li><a href="#home" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Bruidskapsels</a></li>
                        <li><a href="#home" class="text-neutral-300 hover:text-white transition-colors flex items-center"><i class="fas fa-chevron-right text-xs mr-2 text-brand-secondary/70" aria-hidden="true"></i>Heren Kapsels</a></li>
                    </ul>
                </div>

                <!-- Column 4: Contact -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Contact</h4>
                    <ul class="space-y-3 text-sm">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mr-3 text-brand-secondary mt-1 w-4 text-center flex-shrink-0" aria-hidden="true"></i>
                            <span class="text-neutral-300">
                                Bevrijdingsplein 19,<br>2321 BW Leiden
                            </span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-phone-alt mr-3 text-brand-secondary mt-1 w-4 text-center flex-shrink-0" aria-hidden="true"></i>
                            <a href="tel:+31627403860" class="text-neutral-300 hover:text-brand-secondary transition-colors">06-27403860</a>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-envelope mr-3 text-brand-secondary mt-1 w-4 text-center flex-shrink-0" aria-hidden="true"></i>
                            <a href="mailto:info@diamond.nl" class="text-neutral-300 hover:text-brand-secondary transition-colors break-all">info@diamond.nl</a>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-clock mr-3 text-brand-secondary mt-1 w-4 text-center flex-shrink-0" aria-hidden="true"></i>
                            <span class="text-neutral-300">Di-Vr: 9-18 | Za: 9-17</span>
                        </li>
                    </ul>
                    <div class="mt-4 p-3 bg-white/5 rounded-lg border border-white/10">
                        <span class="text-sm font-medium text-brand-secondary block mb-1">🌟 Vrienden Bonus</span>
                        <p class="text-xs text-neutral-300 leading-snug">10% korting voor jou & je vriend(in)!</p>
                    </div>
                </div>
            </div>

            <div class="border-t border-neutral-700 mt-10 pt-6 text-center text-neutral-400 text-xs">
                <p>&copy; <span id="current-year"></span> Diamond Haarsalon. Alle rechten voorbehouden. | <a href="#" class="hover:text-white transition-colors">Privacy</a> | <a href="#" class="hover:text-white transition-colors">Voorwaarden</a></p>
            </div>
        </div>
    </footer>

    <!-- Floating Action Buttons -->
    <div class="fixed bottom-4 left-4 z-50 space-y-4 sm:space-y-0 sm:space-x-4 sm:flex sm:flex-row-reverse">
        <!-- Floating Referral Button -->
        <div id="floating-referral" class="transition-opacity duration-300 opacity-0 hidden">
            <a href="#referral-program" class="floating-btn bg-gradient-to-br from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white rounded-full w-14 h-14 flex flex-col items-center justify-center shadow-lg" aria-label="Bekijk Vrienden Bonus">
                <i class="fas fa-gift text-lg" aria-hidden="true"></i>
                <span class="text-[9px] font-medium mt-0.5 block leading-none">Bonus</span>
            </a>
        </div>

        <!-- Scroll To Top Button (hidden initially) -->
        <div id="scroll-top-btn" class="transition-opacity duration-300 opacity-0 hidden">
            <button aria-label="Scroll naar boven" class="floating-btn bg-white text-brand-primary rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:bg-brand-light">
                <i class="fas fa-chevron-up text-lg" aria-hidden="true"></i>
            </button>
        </div>
    </div>

    <!-- Chat Widget -->
    <div id="chatbot" class="fixed bottom-5 right-5 z-[60]">
        <!-- Chat Button -->
        <button id="chat-button" class="floating-btn bg-brand-primary hover:bg-brand-dark text-white rounded-full w-14 h-14 sm:w-16 sm:h-16 flex items-center justify-center" aria-label="Open Chat" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-comments text-xl sm:text-2xl" aria-hidden="true"></i>
            <!-- Online indicator -->
            <span class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></span>
        </button>

        <!-- Chat Window -->
        <div id="chat-window" class="hidden absolute bottom-[calc(100%+0.75rem)] sm:bottom-[calc(100%+1rem)] right-0 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl overflow-hidden border border-neutral-200 scale-95 opacity-0 flex flex-col" role="dialog" aria-modal="true" aria-labelledby="chat-header-title">
            <!-- Chat Header -->
            <div class="bg-gradient-to-r from-brand-dark to-brand-primary p-3 sm:p-4 text-white flex justify-between items-center flex-shrink-0">
                <div class="flex items-center">
                    <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/20 flex items-center justify-center mr-2 sm:mr-3 border-2 border-white/30 flex-shrink-0">
                        <i class="fas fa-user-headset text-sm sm:text-base" aria-hidden="true"></i>
                    </div>
                    <div>
                        <h3 id="chat-header-title" class="font-semibold text-sm sm:text-base">Diamond Hulp</h3>
                        <p class="text-xs text-gold-light/90">Online | Vraag maar raak</p>
                    </div>
                </div>
                <button id="close-chat" class="text-white/70 hover:text-white transition duration-300 w-7 h-7 sm:w-8 sm:h-8 flex items-center justify-center rounded-full hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/50" aria-label="Sluit chat">
                    <i class="fas fa-times text-base sm:text-lg" aria-hidden="true"></i>
                </button>
            </div>

            <!-- Chat Messages Area -->
            <div id="chat-messages" class="p-3 sm:p-4 h-64 sm:h-80 overflow-y-auto bg-neutral-50 space-y-4 flex-grow">
                <!-- Messages will be added by JS -->
            </div>

            <!-- Chat Input Area -->
            <div class="p-3 sm:p-4 border-t border-neutral-200 bg-white flex-shrink-0">
                <div class="flex items-center space-x-2">
                    <textarea id="chat-input" placeholder="Typ je bericht..." class="flex-1 form-textarea w-full rounded-full border-neutral-300 focus:border-brand-secondary focus:ring focus:ring-brand-secondary/50 transition duration-300 py-2 px-3 text-xs sm:text-sm resize-none max-h-24" autocomplete="off" rows="1"></textarea>
                    <button id="send-message" class="bg-brand-primary hover:bg-brand-dark text-white rounded-full w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center transition duration-300 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Verstuur bericht" disabled>
                        <i class="fas fa-paper-plane text-sm sm:text-base" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Price List Modal -->
    <div id="price-modal" class="fixed inset-0 z-[70] bg-black/60 hidden items-center justify-center p-4 transition-opacity duration-300 ease-in-out opacity-0" aria-labelledby="price-modal-title" role="dialog" aria-modal="true">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden transform scale-95 transition-all duration-300 ease-in-out">
            <!-- Modal Header -->
            <div class="flex justify-between items-center p-4 sm:p-6 border-b border-neutral-200 flex-shrink-0">
                <h2 id="price-modal-title" class="text-xl sm:text-2xl font-semibold font-playfair text-neutral-800">Prijslijst Diamond</h2>
                <button id="close-price-modal-button" class="text-neutral-500 hover:text-neutral-800 transition-colors rounded-full w-8 h-8 flex items-center justify-center hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-brand-primary" aria-label="Sluit prijslijst">
                    <i class="fas fa-times text-lg" aria-hidden="true"></i>
                </button>
            </div>
            <!-- Modal Body -->
            <div id="price-modal-body" class="p-4 sm:p-6 overflow-y-auto flex-grow space-y-6">
                <!-- Price Category 1: Dames -->
                <div class="price-category">
                    <h3 class="text-lg font-semibold mb-3 text-brand-primary border-b pb-1 border-brand-light">Dames</h3>
                    <ul class="space-y-2 text-sm text-neutral-600">
                        <li class="flex justify-between"><span>Knippen, Wassen, Drogen</span> <span class="font-medium">€ 59,50</span></li>
                        <li class="flex justify-between"><span>Knippen, Wassen, Föhnen/Stylen</span> <span class="font-medium">€ 75,00</span></li>
                        <li class="flex justify-between"><span>Uitgroei Kleuren (max 2cm)</span> <span class="font-medium">Vanaf € 89,50</span></li>
                        <li class="flex justify-between"><span>Volledige Kleuring</span> <span class="font-medium">Vanaf € 110,00</span></li>
                        <li class="flex justify-between"><span>Highlights / Lowlights (Half Hoofd)</span> <span class="font-medium">Vanaf € 115,00</span></li>
                        <li class="flex justify-between"><span>Highlights / Lowlights (Heel Hoofd)</span> <span class="font-medium">Vanaf € 150,00</span></li>
                        <li class="flex justify-between"><span>Balayage / Ombre</span> <span class="font-medium">Vanaf € 125,00</span></li>
                        <li class="flex justify-between"><span>Toner / Glossing</span> <span class="font-medium">Vanaf € 45,00</span></li>
                    </ul>
                </div>
                <!-- Price Category 2: Heren -->
                <div class="price-category border-t border-neutral-200 pt-6 mt-6">
                    <h3 class="text-lg font-semibold mb-3 text-brand-primary border-b pb-1 border-brand-light">Heren</h3>
                    <ul class="space-y-2 text-sm text-neutral-600">
                        <li class="flex justify-between"><span>Knippen, Wassen, Stylen</span> <span class="font-medium">€ 42,50</span></li>
                        <li class="flex justify-between"><span>Buzz Cut (Tondeuse)</span> <span class="font-medium">€ 25,00</span></li>
                        <li class="flex justify-between"><span>Baard Trimmen / Contouren</span> <span class="font-medium">€ 15,00</span></li>
                        <li class="flex justify-between"><span>Kleuring</span> <span class="font-medium">Vanaf € 55,00</span></li>
                    </ul>
                </div>
                <!-- Price Category 3: Extra's -->
                <div class="price-category border-t border-neutral-200 pt-6 mt-6">
                    <h3 class="text-lg font-semibold mb-3 text-brand-primary border-b pb-1 border-brand-light">Extra's & Verzorging</h3>
                    <ul class="space-y-2 text-sm text-neutral-600">
                        <li class="flex justify-between"><span>Intensief Haarmasker</span> <span class="font-medium">€ 15,00</span></li>
                        <li class="flex justify-between"><span>Olaplex Herstelbehandeling</span> <span class="font-medium">Vanaf € 39,95</span></li>
                        <li class="flex justify-between"><span>Keratine Behandeling</span> <span class="font-medium">Op aanvraag</span></li>
                        <li class="flex justify-between"><span>Bruids- / Feestkapsel</span> <span class="font-medium">Op aanvraag</span></li>
                        <li class="flex justify-between"><span>Wenkbrauwen Epileren</span> <span class="font-medium">€ 12,50</span></li>
                    </ul>
                </div>
                <p class="text-xs text-neutral-500 italic text-center mt-4">Prijzen zijn indicatief en kunnen variëren afhankelijk van haarlengte, dikte en specifieke wensen. Vraag uw stylist om een exacte prijsopgave.</p>
            </div>
            <!-- Modal Footer -->
            <div class="p-4 bg-neutral-50 border-t border-neutral-200 text-right flex-shrink-0">
                <button id="close-price-modal-button-footer" class="px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 transition-colors text-sm font-medium">Sluiten</button>
            </div>
        </div>
    </div>

    <!-- JavaScript - Improved & Organized -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Elements References ---
            const header = document.getElementById('main-header');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuLinks = mobileMenu?.querySelectorAll('.mobile-menu-link');
            const menuIcon = mobileMenuButton?.querySelector('i');
            const priceModal = document.getElementById('price-modal');
            const openPriceModalButton = document.getElementById('open-price-modal-button');
            const closePriceModalButton = document.getElementById('close-price-modal-button');
            const closePriceModalButtonFooter = document.getElementById('close-price-modal-button-footer');
            const priceModalContent = priceModal?.querySelector('.bg-white');
            const floatingReferral = document.getElementById('floating-referral');
            const scrollTopBtn = document.getElementById('scroll-top-btn');

            // --- Constants ---
            const SCROLL_THRESHOLD = 50;
            const FLOATING_REFERRAL_THRESHOLD = 300;
            const SCROLL_TOP_THRESHOLD = 400;

            // --- Header, Floating Buttons & Scroll Handling ---
            const handleScrollEvents = () => {
                if (!header) return;
                const scrollY = window.scrollY;

                // Header styling
                if (scrollY > SCROLL_THRESHOLD) {
                    // Continuing from previous artifact

                    header.classList.add('header-scrolled');
                } else {
                    header.classList.remove('header-scrolled');
                }

                // Floating Referral Button Visibility
                if (floatingReferral) {
                    if (scrollY > FLOATING_REFERRAL_THRESHOLD) {
                        if (floatingReferral.classList.contains('hidden')) {
                            floatingReferral.classList.remove('hidden');
                            // Force reflow to apply transition correctly after removing hidden
                            void floatingReferral.offsetWidth;
                            floatingReferral.classList.remove('opacity-0');
                            floatingReferral.classList.add('opacity-100');
                        }
                    } else {
                        if (!floatingReferral.classList.contains('hidden') && !floatingReferral.classList.contains('opacity-0')) {
                            floatingReferral.classList.remove('opacity-100');
                            floatingReferral.classList.add('opacity-0');
                            // Use setTimeout to add 'hidden' after the transition ends
                            setTimeout(() => {
                                // Check again in case user scrolled back down quickly
                                if (window.scrollY <= FLOATING_REFERRAL_THRESHOLD) {
                                    floatingReferral.classList.add('hidden');
                                }
                            }, 300);
                        }
                    }
                }

                // Scroll To Top Button Visibility
                if (scrollTopBtn) {
                    if (scrollY > SCROLL_TOP_THRESHOLD) {
                        if (scrollTopBtn.classList.contains('hidden')) {
                            scrollTopBtn.classList.remove('hidden');
                            void scrollTopBtn.offsetWidth;
                            scrollTopBtn.classList.remove('opacity-0');
                            scrollTopBtn.classList.add('opacity-100');
                        }
                    } else {
                        if (!scrollTopBtn.classList.contains('hidden') && !scrollTopBtn.classList.contains('opacity-0')) {
                            scrollTopBtn.classList.remove('opacity-100');
                            scrollTopBtn.classList.add('opacity-0');
                            setTimeout(() => {
                                if (window.scrollY <= SCROLL_TOP_THRESHOLD) {
                                    scrollTopBtn.classList.add('hidden');
                                }
                            }, 300);
                        }
                    }
                }
            };

            // Scroll to top function
            const scrollToTop = () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            };

            // Add scroll event listener
            window.addEventListener('scroll', handleScrollEvents, { passive: true });
            
            // Initial check on load
            handleScrollEvents();

            // Scroll to top button click handler
            if (scrollTopBtn) {
                scrollTopBtn.addEventListener('click', scrollToTop);
            }

            // --- Improved Mobile Menu ---
            const toggleMobileMenu = () => {
                if (!mobileMenu || !menuIcon || !mobileMenuButton) return;
                
                // Toggle menu-open class instead of hidden
                const isOpen = mobileMenu.classList.toggle('menu-open');
                mobileMenuButton.setAttribute('aria-expanded', String(isOpen));

                if (isOpen) {
                    menuIcon.classList.remove('fa-bars');
                    menuIcon.classList.add('fa-times');
                    document.body.style.overflow = 'hidden'; // Prevent body scroll
                } else {
                    menuIcon.classList.remove('fa-times');
                    menuIcon.classList.add('fa-bars');
                    document.body.style.overflow = ''; // Allow body scroll
                }
            };

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', toggleMobileMenu);

                // Close menu when a link is clicked
                mobileMenuLinks?.forEach(link => {
                    link.addEventListener('click', () => {
                        if (mobileMenu.classList.contains('menu-open')) {
                            toggleMobileMenu();
                        }
                    });
                });

                // Close menu on Escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && mobileMenu.classList.contains('menu-open')) {
                        toggleMobileMenu();
                    }
                });

                // Close menu if clicked outside
                document.addEventListener('click', (e) => {
                    if (mobileMenu.classList.contains('menu-open') && 
                        !mobileMenu.contains(e.target) && 
                        !mobileMenuButton.contains(e.target)) {
                        toggleMobileMenu();
                    }
                });
            }

            // --- Price Modal Handling ---
            const openPriceModal = () => {
                if (!priceModal || !priceModalContent) return;
                priceModal.classList.remove('hidden');
                priceModal.classList.add('flex');
                document.body.style.overflow = 'hidden';
                
                requestAnimationFrame(() => {
                    priceModal.classList.remove('opacity-0');
                    priceModalContent.classList.remove('scale-95');
                    priceModal.classList.add('opacity-100');
                    priceModalContent.classList.add('scale-100');
                });
                
                closePriceModalButton?.focus();
            };

            const closePriceModal = () => {
                if (!priceModal || !priceModalContent || priceModal.classList.contains('hidden')) return;

                priceModal.classList.remove('opacity-100');
                priceModalContent.classList.remove('scale-100');
                priceModal.classList.add('opacity-0');
                priceModalContent.classList.add('scale-95');

                setTimeout(() => {
                    priceModal.classList.add('hidden');
                    priceModal.classList.remove('flex');
                    document.body.style.overflow = '';
                }, 300);
                
                openPriceModalButton?.focus();
            };

            if (openPriceModalButton && priceModal && closePriceModalButton && closePriceModalButtonFooter) {
                openPriceModalButton.addEventListener('click', openPriceModal);
                closePriceModalButton.addEventListener('click', closePriceModal);
                closePriceModalButtonFooter.addEventListener('click', closePriceModal);

                // Close on backdrop click
                priceModal.addEventListener('click', (event) => {
                    if (event.target === priceModal) {
                        closePriceModal();
                    }
                });

                // Close on Escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && !priceModal.classList.contains('hidden')) {
                        closePriceModal();
                    }
                });
            }

            // --- Animation on Scroll ---
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.15 // Trigger when 15% of the element is visible
            };

            const animationObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const element = entry.target;
                        const animationName = getComputedStyle(element).getPropertyValue('--animation-name').trim() || 'fadeIn';
                        const delay = element.getAttribute('data-delay') || '0s';
                        const duration = '0.8s'; // Slightly longer for smoother effect
                        const fillMode = 'forwards';
                        const easing = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)'; // More dynamic easing

                        element.style.animation = `${animationName} ${duration} ${easing} ${delay} ${fillMode}`;
                        element.classList.add('is-visible');

                        observer.unobserve(element);
                    }
                });
            }, observerOptions);

            animatedElements.forEach(el => animationObserver.observe(el));

            // --- Initialize Fancybox ---
            if (typeof Fancybox !== 'undefined') {
                Fancybox.bind("[data-fancybox]", {
                    Thumbs: { showOnStart: false },
                    Images: { zoom: false },
                    Toolbar: {
                        display: {
                            left: ["infobar"],
                            middle: [],
                            right: ["close"],
                        },
                    },
                    caption: function (fancybox, slide) {
                        return slide.triggerEl?.dataset.caption || "";
                    }
                });
            } else {
                console.warn("Fancybox library not found or not loaded yet.");
            }

            // --- Update Footer Year ---
            const currentYearSpan = document.getElementById('current-year');
            if (currentYearSpan) {
                currentYearSpan.textContent = new Date().getFullYear();
            }

            // --- Smooth Scroll for Internal Links ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href !== '#') {
                        e.preventDefault();
                        
                        const targetId = href.substring(1);
                        const targetElement = document.getElementById(targetId);
                        
                        if (targetElement) {
                            const headerOffset = 80; // Adjust based on header height
                            const elementPosition = targetElement.getBoundingClientRect().top;
                            const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                            window.scrollTo({
                                top: offsetPosition,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });

            // --- Chat Widget Functionality ---
            const chatWidget = {
                elements: {
                    widget: document.getElementById('chatbot'),
                    toggleBtn: document.getElementById('chat-button'),
                    container: document.getElementById('chat-window'),
                    closeBtn: document.getElementById('close-chat'),
                    messagesContainer: document.getElementById('chat-messages'),
                    input: document.getElementById('chat-input'),
                    sendBtn: document.getElementById('send-message')
                },
                state: {
                    isOpen: false,
                    isProcessing: false,
                    threadId: null,
                    messages: [],
                    initialized: false,
                    typingTimeout: null
                },
                storage: {
                    THREAD_ID: 'diamond_chat_thread_id_v2',
                    MESSAGES: 'diamond_chat_messages_v2'
                },

                init: function() {
                    if (!this.elements.widget || !this.elements.toggleBtn || !this.elements.container) {
                        console.warn("Chat widget base elements not found. Chat disabled.");
                        return;
                    }

                    if (!this.elements.closeBtn || !this.elements.messagesContainer || !this.elements.input || !this.elements.sendBtn) {
                        console.warn("Chat widget interactive elements not fully found. Chat functionality might be limited.");
                    }

                    this.loadState();
                    this.setupEventListeners();

                    if (this.state.threadId && this.state.messages.length > 0) {
                        console.log("Chat: Resuming session with Thread ID:", this.state.threadId);
                        this.loadMessages();
                        this.state.initialized = true;
                    } else if (this.state.threadId && this.state.messages.length === 0) {
                        console.log("Chat: Found Thread ID but no messages, fetching initial state...");
                        this.initializeChat(false);
                    } else {
                        console.log("Chat: No previous session found, initializing new chat.");
                        this.initializeChat(true);
                    }

                    if (this.elements.input && this.elements.sendBtn) {
                        this.elements.sendBtn.disabled = this.elements.input.value.trim() === '';
                    }
                },

                setupEventListeners: function() {
                    this.elements.toggleBtn?.addEventListener('click', () => this.toggleChat());
                    this.elements.closeBtn?.addEventListener('click', () => this.closeChat());
                    this.elements.sendBtn?.addEventListener('click', () => this.sendMessage());

                    this.elements.input?.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' && !e.shiftKey) {
                            e.preventDefault();
                            if (!this.elements.sendBtn?.disabled) {
                                this.sendMessage();
                            }
                        }
                    });

                    this.elements.input?.addEventListener('input', () => {
                        if (!this.elements.input || !this.elements.sendBtn) return;
                        
                        this.elements.input.style.height = 'auto';
                        const maxHeight = 96;
                        const newHeight = Math.min(this.elements.input.scrollHeight, maxHeight);
                        this.elements.input.style.height = `${newHeight}px`;
                        
                        this.elements.sendBtn.disabled = this.elements.input.value.trim() === '' || this.state.isProcessing;
                    });

                    this.elements.container?.addEventListener('keydown', (e) => {
                        if (e.key === 'Escape' && this.state.isOpen) {
                            this.closeChat();
                        }
                    });

                    document.addEventListener('click', (e) => {
                        if (this.state.isOpen && this.elements.container && this.elements.toggleBtn) {
                            if (!this.elements.container.contains(e.target) && !this.elements.toggleBtn.contains(e.target)) {
                                this.closeChat();
                            }
                        }
                    });
                },

                toggleChat: function() {
                    this.state.isOpen ? this.closeChat() : this.openChat();
                },

                openChat: function() {
                    if (!this.elements.container || !this.elements.toggleBtn || this.state.isOpen) return;

                    this.elements.container.classList.remove('hidden');
                    requestAnimationFrame(() => {
                        this.elements.container.classList.remove('scale-95', 'opacity-0');
                        this.elements.container.classList.add('scale-100', 'opacity-100');
                    });

                    this.elements.toggleBtn.classList.add('scale-90', 'opacity-0', 'pointer-events-none');
                    setTimeout(() => this.elements.toggleBtn.classList.add('hidden'), 200);

                    this.state.isOpen = true;
                    this.elements.toggleBtn.setAttribute('aria-expanded', 'true');
                    this.scrollToBottom();

                    setTimeout(() => {
                        this.elements.input?.focus();
                    }, 350);
                },

                closeChat: function() {
                    if (!this.elements.container || !this.elements.toggleBtn || !this.state.isOpen) return;

                    this.elements.container.classList.remove('scale-100', 'opacity-100');
                    this.elements.container.classList.add('scale-95', 'opacity-0');

                    this.elements.toggleBtn.classList.remove('hidden');
                    requestAnimationFrame(() => {
                        this.elements.toggleBtn.classList.remove('scale-90', 'opacity-0', 'pointer-events-none');
                    });

                    setTimeout(() => {
                        this.elements.container.classList.add('hidden');
                        this.state.isOpen = false;
                        this.elements.toggleBtn.setAttribute('aria-expanded', 'false');
                    }, 300);
                },

                initializeChat: async function(addWelcome = true) {
                    if (addWelcome && this.state.messages.length === 0) {
                        const welcomeMessage = "👋 Welkom bij Diamond! Hoe kan ik helpen? Vraag naar diensten, prijzen of beschikbaarheid.";
                        this.addMessageToUI(welcomeMessage, false, false);
                        this.state.messages.push({ content: welcomeMessage, isUser: false, timestamp: new Date().toISOString() });
                        this.state.initialized = true;
                        this.saveState();
                    }

                    if (!this.state.threadId) {
                        try {
                            const threadId = await this.createThread();
                            this.state.threadId = threadId;
                            this.saveState();
                        } catch (error) {
                            console.error('Chat Error: Failed to create thread during initialization.', error);
                            this.addMessageToUI("Kon geen chat starten. Probeer later opnieuw.", false);
                            this.state.initialized = false;
                            return;
                        }
                    } else {
                        this.state.initialized = true;
                    }
                    
                    if (this.elements.input) this.elements.input.disabled = false;
                    if (this.elements.sendBtn) this.elements.sendBtn.disabled = this.elements.input.value.trim() === '';
                },

                loadState: function() {
                    try {
                        const threadId = localStorage.getItem(this.storage.THREAD_ID);
                        const messagesJson = localStorage.getItem(this.storage.MESSAGES);

                        if (threadId) {
                            this.state.threadId = threadId;
                        }
                        if (messagesJson) {
                            this.state.messages = JSON.parse(messagesJson);
                            if (!Array.isArray(this.state.messages)) {
                                console.warn("Chat Warning: Invalid message format in storage, resetting.");
                                this.state.messages = [];
                            }
                        } else {
                            this.state.messages = [];
                        }
                        console.log("Chat State Loaded:", { threadId: this.state.threadId, messageCount: this.state.messages.length });
                    } catch (error) {
                        console.error('Chat Error: Failed to load state from localStorage.', error);
                        this.resetState();
                    }
                },

                saveState: function() {
                    try {
                        if (this.state.threadId) {
                            localStorage.setItem(this.storage.THREAD_ID, this.state.threadId);
                        } else {
                            localStorage.removeItem(this.storage.THREAD_ID);
                        }
                        
                        const messagesToStore = this.state.messages.slice(-50);
                        localStorage.setItem(this.storage.MESSAGES, JSON.stringify(messagesToStore));
                    } catch (error) {
                        console.error('Chat Error: Failed to save state to localStorage.', error);
                    }
                },

                resetState: function() {
                    console.log("Chat: Resetting chat state.");
                    this.state.threadId = null;
                    this.state.messages = [];
                    this.state.initialized = false;
                    this.state.isProcessing = false;
                    localStorage.removeItem(this.storage.THREAD_ID);
                    localStorage.removeItem(this.storage.MESSAGES);
                    if (this.elements.messagesContainer) this.elements.messagesContainer.innerHTML = '';
                },

                loadMessages: function() {
                    if (!this.elements.messagesContainer) return;
                    this.elements.messagesContainer.innerHTML = '';
                    this.state.messages.forEach(message => {
                        this.addMessageToUI(message.content, message.isUser, false);
                    });
                    this.scrollToBottom();
                },

                createThread: async function() {
                    console.log('Chat API: Creating new thread...');
                    try {
                        const response = await fetch('/api/openai-api/create-thread', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' }
                        });
                        if (!response.ok) {
                            const errorData = await response.json().catch(() => ({ detail: "Unknown error creating thread" }));
                            throw new Error(`API Error (${response.status}): ${errorData.detail}`);
                        }
                        const data = await response.json();
                        if (!data.id) throw new Error('Thread ID not received from API.');
                        console.log('Chat API: Thread created:', data.id);
                        return data.id;
                    } catch (error) {
                        console.error('Chat Error in createThread:', error);
                        throw error;
                    }
                },

                sendMessage: async function() {
                    if (!this.elements.input || !this.elements.sendBtn) return;
                    const messageText = this.elements.input.value.trim();

                    if (!messageText || this.state.isProcessing || !this.state.threadId) {
                        if (!this.state.threadId) console.warn("Chat Warning: Cannot send message, thread not initialized.");
                        return;
                    }

                    this.state.isProcessing = true;
                    this.elements.sendBtn.disabled = true;
                    this.elements.input.disabled = true;
                    this.elements.input.value = '';
                    this.elements.input.style.height = 'auto';

                    try {
                        this.addMessageToUI(messageText, true);
                        this.state.messages.push({ content: messageText, isUser: true, timestamp: new Date().toISOString() });
                        this.saveState();

                        this.showTypingIndicator();

                        await this.addMessageToThread(messageText);
                        await this.processResponse();

                    } catch (error) {
                        console.error('Chat Error: Failed during sendMessage process.', error);
                        this.removeTypingIndicator();
                        const errorMsg = "Sorry, er ging iets mis. Probeer het opnieuw of neem contact op.";
                        this.addMessageToUI(errorMsg, false);
                        this.state.messages.push({ content: errorMsg, isUser: false, timestamp: new Date().toISOString() });
                        this.saveState();
                    } finally {
                        this.state.isProcessing = false;
                        if (this.state.initialized) {
                            this.elements.input.disabled = false;
                            this.elements.sendBtn.disabled = this.elements.input.value.trim() === '';
                            this.elements.input.focus();
                        } else {
                            this.elements.input.disabled = true;
                            this.elements.sendBtn.disabled = true;
                        }
                        this.removeTypingIndicator();
                    }
                },

                addMessageToThread: async function(content) {
                    if (!this.state.threadId) throw new Error("Missing threadId in addMessageToThread");
                    console.log(`Chat API: Adding message to thread ${this.state.threadId}...`);
                    try {
                        const response = await fetch('/api/openai-api/add-message', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ threadId: this.state.threadId, content: content })
                        });
                        if (!response.ok) {
                            const errorData = await response.json().catch(() => ({ detail: "Unknown error adding message" }));
                            throw new Error(`API Error (${response.status}): ${errorData.detail}`);
                        }
                        const data = await response.json();
                        console.log('Chat API: Message added:', data.id);
                        return data;
                    } catch (error) {
                        console.error('Chat Error in addMessageToThread:', error);
                        throw error;
                    }
                },

                processResponse: async function() {
                    if (!this.state.threadId) throw new Error("Missing threadId in processResponse");
                    let runId = null;
                    let attempts = 0;
                    const maxAttempts = 30;
                    const pollInterval = 1500;

                    try {
                        console.log(`Chat API: Creating run for thread ${this.state.threadId}...`);
                        const runResponse = await fetch('/api/openai-api/create-run', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ threadId: this.state.threadId })
                        });

                        if (!runResponse.ok) {
                            const errorData = await runResponse.json().catch(() => ({ detail: "Unknown error creating run" }));
                            throw new Error(`API Error (${runResponse.status}) creating run: ${errorData.detail}`);
                        }

                        const runData = await runResponse.json();
                        if (!runData.id) throw new Error('Run ID not received from API.');
                        runId = runData.id;
                        console.log('Chat API: Run created:', runId);

                        let status = runData.status;
                        while (['queued', 'in_progress'].includes(status) && attempts < maxAttempts) {
                            attempts++;
                            await new Promise(resolve => setTimeout(resolve, pollInterval));
                            console.log(`Chat API: Checking run status (Attempt ${attempts})...`);

                            try {
                                const statusResponse = await fetch(`/api/openai-api/check-run-status?threadId=${this.state.threadId}&runId=${runId}`);
                                if (!statusResponse.ok) {
                                    console.warn(`Chat Warning: Status check failed (Attempt ${attempts}): ${statusResponse.status}`);
                                    if (attempts >= maxAttempts - 5) {
                                        const errorData = await statusResponse.json().catch(() => ({ detail: `Status check failed` }));
                                        throw new Error(`API Error (${statusResponse.status}) checking status: ${errorData.detail}`);
                                    }
                                    continue;
                                }
                                const statusData = await statusResponse.json();
                                status = statusData.status;
                                console.log('Chat API: Run status:', status);
                            } catch (pollError) {
                                console.error("Chat Error during polling:", pollError);
                                if (attempts >= maxAttempts - 5) throw pollError;
                                continue;
                            }

                            if (status === 'completed') {
                                console.log('Chat API: Run completed. Fetching messages...');
                                this.removeTypingIndicator();

                                const messagesResponse = await fetch(`/api/openai-api/get-messages?threadId=${this.state.threadId}&limit=5&order=desc`);

                                if (!messagesResponse.ok) {
                                    const errorData = await messagesResponse.json().catch(() => ({ detail: "Unknown error getting messages" }));
                                    throw new Error(`API Error (${messagesResponse.status}) getting messages: ${errorData.detail}`);
                                }

                                const messagesData = await messagesResponse.json();
                                console.log('Chat API: Messages received:', messagesData.data?.length);

                                const latestAssistantMessage = messagesData.data?.find(msg => msg.role === 'assistant' && msg.run_id === runId);

                                if (latestAssistantMessage?.content?.[0]?.type === 'text') {
                                    const responseContent = latestAssistantMessage.content[0].text.value;
                                    console.log('Chat API: Assistant response found:', responseContent.substring(0, 50) + '...');

                                    this.addMessageToUI(responseContent, false);
                                    this.state.messages.push({
                                        content: responseContent,
                                        isUser: false,
                                        timestamp: new Date(latestAssistantMessage.created_at * 1000).toISOString()
                                    });
                                    this.saveState();
                                } else {
                                    console.warn('Chat Warning: Run completed, but no suitable assistant message found.', latestAssistantMessage);
                                    this.addMessageToUI("Er was een antwoord, maar ik kon het niet lezen. Probeer het opnieuw.", false);
                                }
                                return;
                            } else if (['failed', 'expired', 'cancelled', 'requires_action'].includes(status)) {
                                console.error(`Chat Error: Run ended with status: ${status}`, runData);
                                throw new Error(`Chat sessie mislukt (status: ${status}).`);
                            }
                        }

                        if (attempts >= maxAttempts) {
                            throw new Error('Timeout waiting for assistant response.');
                        }

                    } catch (error) {
                        console.error('Chat Error in processResponse:', error);
                        this.removeTypingIndicator();
                        const errorMsg = error.message.startsWith("Chat sessie mislukt") || error.message.startsWith("Timeout")
                            ? error.message
                            : "Er is een onverwachte fout opgetreden. Probeer het later opnieuw.";
                        this.addMessageToUI(errorMsg, false);
                        this.state.messages.push({ content: errorMsg, isUser: false, timestamp: new Date().toISOString() });
                        this.saveState();
                    }
                },

                addMessageToUI: function(content, isUser, animate = true) {
                    if (!this.elements.messagesContainer) return;

                    const messageWrapper = document.createElement('div');
                    messageWrapper.className = `flex items-start gap-2.5 mb-3 ${isUser ? 'justify-end' : 'justify-start'}`;

                    const bubbleClasses = isUser
                        ? 'bg-neutral-200 rounded-lg rounded-br-none text-neutral-800'
                        : 'bg-white rounded-lg rounded-tl-none text-neutral-800 border border-neutral-100';

                    const formattedContent = this.formatMessageContent(content);

                    let innerHTML = '';
                    if (!isUser) {
                        innerHTML += `
                            <div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-brand-light flex items-center justify-center text-brand-primary mt-1 self-end">
                                <i class="fas fa-robot text-xs sm:text-sm" aria-hidden="true"></i>
                            </div>`;
                    }

                    innerHTML += `
                        <div class="flex flex-col gap-1 max-w-[80%] sm:max-w-[75%]">
                            ${!isUser ? '<span class="text-xs font-semibold text-neutral-600 ml-1">Diamond Bot</span>' : ''}
                            <div class="leading-snug p-2.5 sm:p-3 shadow-sm text-xs sm:text-sm font-normal ${bubbleClasses}">
                                ${formattedContent}
                            </div>
                        </div>`;

                    messageWrapper.innerHTML = innerHTML;

                    if (animate) {
                        messageWrapper.style.opacity = '0';
                        messageWrapper.style.transform = `translateY(10px) ${isUser ? 'translateX(10px)' : 'translateX(-10px)'}`;
                        this.elements.messagesContainer.appendChild(messageWrapper);
                        requestAnimationFrame(() => {
                            messageWrapper.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                            messageWrapper.style.opacity = '1';
                            messageWrapper.style.transform = 'translateY(0) translateX(0)';
                        });
                    } else {
                        this.elements.messagesContainer.appendChild(messageWrapper);
                    }

                    this.scrollToBottom();
                },

                formatMessageContent: function(content) {
                    let formattedText = content.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                    
                    const urlRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
                    formattedText = formattedText.replace(urlRegex, '<a href="$1" target="_blank" rel="noopener noreferrer" class="text-brand-primary underline hover:text-brand-dark">$1</a>');
                    
                    formattedText = formattedText.replace(/\n/g, '<br>');
                    return formattedText;
                },

                showTypingIndicator: function() {
                    if (!this.elements.messagesContainer) return;
                    if (this.state.typingTimeout) clearTimeout(this.state.typingTimeout);
                    this.removeTypingIndicator();

                    const typingDiv = document.createElement('div');
                    typingDiv.id = 'typing-indicator';
                    typingDiv.className = 'flex items-start gap-2.5 mb-3 justify-start';

                    typingDiv.innerHTML = `
                        <div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-brand-light flex items-center justify-center text-brand-primary mt-1 self-end">
                            <i class="fas fa-robot text-xs sm:text-sm" aria-hidden="true"></i>
                        </div>
                        <div class="flex flex-col gap-1 max-w-[80%] sm:max-w-[75%]">
                            <span class="text-xs font-semibold text-neutral-600 ml-1">Diamond Bot</span>
                            <div class="leading-snug p-2.5 sm:p-3 bg-white rounded-lg rounded-tl-none shadow-sm border border-neutral-100">
                                <div class="flex space-x-1 items-center h-4">
                                    <div class="w-1.5 h-1.5 bg-neutral-400 rounded-full animate-bounce" style="animation-delay: -0.32s;"></div>
                                    <div class="w-1.5 h-1.5 bg-neutral-400 rounded-full animate-bounce" style="animation-delay: -0.16s;"></div>
                                    <div class="w-1.5 h-1.5 bg-neutral-400 rounded-full animate-bounce"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    typingDiv.style.opacity = '0';
                    this.elements.messagesContainer.appendChild(typingDiv);
                    requestAnimationFrame(() => {
                        typingDiv.style.transition = 'opacity 0.3s ease';
                        typingDiv.style.opacity = '1';
                    });

                    this.scrollToBottom();

                    this.state.typingTimeout = setTimeout(() => {
                        console.warn("Chat Warning: Typing indicator timed out.");
                        this.removeTypingIndicator();
                    }, 30000);
                },

                removeTypingIndicator: function() {
                    if (this.state.typingTimeout) {
                        clearTimeout(this.state.typingTimeout);
                        this.state.typingTimeout = null;
                    }
                    const typingIndicator = document.getElementById('typing-indicator');
                    if (typingIndicator) {
                        typingIndicator.style.transition = 'opacity 0.3s ease';
                        typingIndicator.style.opacity = '0';
                        setTimeout(() => typingIndicator.remove(), 300);
                    }
                },

                scrollToBottom: function() {
                    if (!this.elements.messagesContainer) return;
                    this.elements.messagesContainer.scrollTo({
                        top: this.elements.messagesContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                }
            };

            // Initialize the chat widget
            chatWidget.init();
        });
</script>
</body>
</html>
